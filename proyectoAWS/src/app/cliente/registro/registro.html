<div class="d-flex justify-content-center align-items-center vh-100 bg-light">
  <div class="card shadow-lg p-4 border-0" style="width: 100%; max-width: 420px; border-radius: 1rem;">
    <div class="text-center mb-4">
      <img src="logo.ico" alt="Logo" width="80" class="mb-3" *ngIf="logoVisible">
      <h2 class="fw-bold text-success">Crear Cuenta</h2>
      <p class="text-muted mb-0">Regístrate para comenzar a disfrutar</p>
    </div>

    <form (ngSubmit)="onRegister()" #regForm="ngForm" novalidate>
      <!-- Nombre: solo letras y espacios -->
      <div class="mb-3">
        <label class="form-label fw-semibold" for="nombre">Nombre completo</label>
        <input
          id="nombre"
          type="text"
          [(ngModel)]="nombre"
          name="nombre"
          required
          pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ ]+$"
          placeholder="Tu nombre completo"
          class="form-control form-control-lg"
          #nombreModel="ngModel"
          [class.is-invalid]="(nombreModel.invalid && (nombreModel.touched || regForm.submitted))"
        />
        <div class="invalid-feedback" *ngIf="nombreModel.errors?.['required'] && (nombreModel.touched || regForm.submitted)">
          El nombre es obligatorio.
        </div>
        <div class="invalid-feedback" *ngIf="nombreModel.errors?.['pattern'] && (nombreModel.touched || regForm.submitted)">
          Solo letras y espacios (sin números).
        </div>
      </div>

      <!-- Correo: debe contener @ y dominio simple -->
      <div class="mb-3">
        <label class="form-label fw-semibold" for="correo">Correo electrónico</label>
        <input
          id="correo"
          type="email"
          [(ngModel)]="correo"
          name="correo"
          required
          pattern="^[^\s@]+@[^\s@]+\.[^\s@]{2,}$"
          placeholder="ejemplo@correo.com"
          class="form-control form-control-lg"
          #correoModel="ngModel"
          [class.is-invalid]="(correoModel.invalid && (correoModel.touched || regForm.submitted))"
        />
        <div class="invalid-feedback" *ngIf="correoModel.errors?.['required'] && (correoModel.touched || regForm.submitted)">
          El correo es obligatorio.
        </div>
        <div class="invalid-feedback" *ngIf="correoModel.errors?.['pattern'] && (correoModel.touched || regForm.submitted)">
          Ingresa un correo válido (debe incluir @ y dominio).
        </div>
      </div>

      <!-- Contraseña -->
      <div class="mb-3">
        <label class="form-label fw-semibold" for="contrasena">Contraseña</label>
        <input
          id="contrasena"
          type="password"
          [(ngModel)]="contrasena"
          name="contrasena"
          required
          minlength="6"
          placeholder="••••••••"
          class="form-control form-control-lg"
          #passModel="ngModel"
          [class.is-invalid]="(passModel.invalid && (passModel.touched || regForm.submitted))"
        />
        <div class="invalid-feedback" *ngIf="passModel.errors?.['required'] && (passModel.touched || regForm.submitted)">
          La contraseña es obligatoria.
        </div>
        <div class="invalid-feedback" *ngIf="passModel.errors?.['minlength'] && (passModel.touched || regForm.submitted)">
          Mínimo 6 caracteres.
        </div>
      </div>

      <!-- Dirección (opcional: si la quieres obligatoria, deja required) -->
      <div class="mb-3">
        <label class="form-label fw-semibold" for="direccion">Dirección</label>
        <input
          id="direccion"
          type="text"
          [(ngModel)]="direccion"
          name="direccion"
          placeholder="Calle, número, distrito..."
          class="form-control form-control-lg"
        />
      </div>

      <!-- Teléfono: exactamente 9 dígitos -->
      <div class="mb-4">
        <label class="form-label fw-semibold" for="telefono">Teléfono</label>
        <input
          id="telefono"
          type="tel"
          inputmode="numeric"
          [(ngModel)]="telefono"
          name="telefono"
          required
          pattern="^[0-9]{9}$"
          placeholder="987654321"
          class="form-control form-control-lg"
          #telModel="ngModel"
          [class.is-invalid]="(telModel.invalid && (telModel.touched || regForm.submitted))"
        />
        <div class="invalid-feedback" *ngIf="telModel.errors?.['required'] && (telModel.touched || regForm.submitted)">
          El teléfono es obligatorio.
        </div>
        <div class="invalid-feedback" *ngIf="telModel.errors?.['pattern'] && (telModel.touched || regForm.submitted)">
          Deben ser exactamente 9 dígitos.
        </div>
      </div>

      <button
        type="submit"
        class="btn btn-success btn-lg w-100 fw-semibold"
        style="border-radius: 0.5rem;"
        [disabled]="cargando || regForm.invalid"
      >
        <ng-container *ngIf="!cargando; else cargTpl">Registrar</ng-container>
        <ng-template #cargTpl>
          <span class="spinner-border spinner-border-sm me-2"></span> Enviando...
        </ng-template>
      </button>
    </form>

    <div *ngIf="successMessage" class="text-success text-center mt-3 fw-semibold">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="text-danger text-center mt-3 fw-semibold">
      {{ errorMessage }}
    </div>

    <div class="text-center mt-4">
      <small class="text-muted">¿Ya tienes cuenta?
        <a [routerLink]="['/cliente/login']" class="text-success text-decoration-none fw-semibold">
          Inicia sesión
        </a>
      </small>
    </div>
  </div>
</div>
